<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Register - Real Estate Marketplace</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&family=Playfair+Display:wght@600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      :root {
        --primary: #eaa636;
        --secondary: #2b2b2b;
      }
      body {
        background-color: #ffffff;
        font-family: "Roboto", sans-serif;
      }
      .login-container {
        max-width: 450px;
        margin: 2rem auto;
        padding: 2rem;
        border-radius: 15px;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
      }
      .login-header {
        text-align: center;
        margin-bottom: 2rem;
      }
      .login-header h1 {
        color: var(--secondary);
        font-family: "Playfair Display", serif;
        font-weight: 700;
      }
      .form-control {
        border: 2px solid #e1e1e1;
        padding: 0.8rem;
        margin-bottom: 1rem;
        border-radius: 8px;
        transition: all 0.3s ease;
      }
      .form-control:focus {
        border-color: var(--primary);
        box-shadow: 0 0 0 0.2rem rgba(255, 107, 0, 0.25);
      }
      .form-label {
        color: var(--secondary);
        font-weight: 500;
      }
      .btn-login {
        background-color: var(--primary);
        border: none;
        padding: 0.8rem;
        font-weight: 500;
        border-radius: 8px;
        width: 100%;
        margin-top: 1rem;
        transition: all 0.3s ease;
      }
      .btn-login:hover {
        background-color: #d49530;
        transform: translateY(-2px);
      }
      .divider {
        text-align: center;
        margin: 1.5rem 0;
        position: relative;
      }
      .divider::before {
        content: "";
        position: absolute;
        left: 0;
        top: 50%;
        width: 45%;
        height: 1px;
        background-color: #e1e1e1;
      }
      .divider::after {
        content: "";
        position: absolute;
        right: 0;
        top: 50%;
        width: 45%;
        height: 1px;
        background-color: #e1e1e1;
      }
      .form-check-input:checked {
        background-color: var(--primary);
        border-color: var(--primary);
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="login-container">
        <div class="login-header">
          <h1>Create Account</h1>
          <p class="text-muted">Please fill in your information</p>
        </div>
        <form id="register-form">
          <div class="mb-3">
            <label for="fullname" class="form-label">Full Name</label>
            <input
              type="text"
              class="form-control"
              id="name"
              name="name"
              placeholder="Enter your full name"
            />
          </div>
          <div class="mb-3">
            <label for="email" class="form-label">Email Address</label>
            <input
              type="email"
              class="form-control"
              id="email"
              name="email"
              placeholder="Enter your email"
            />
          </div>
          <div class="mb-3">
            <label for="password" class="form-label">Password</label>
            <input
              type="password"
              class="form-control"
              id="password"
              name="password"
              placeholder="Create a password"
            />
          </div>

          <button type="submit" class="btn btn-login text-white">
            Create Account
          </button>
          <div class="text-center mt-4">
            <p class="mb-0">
              Already have an account?
              <a
                href="login.html"
                style="color: var(--primary); text-decoration: none"
                >Sign in</a
              >
            </p>
          </div>
        </form>
      </div>
    </div>
    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.3/dist/jquery.validate.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>

    <!-- Custom JavaScript Files -->
    <script src="../utils/constants.js"></script>
    <script src="../utils/utils.js"></script>
    <script src="../utils/rest_client.js"></script>
    <script src="../utils/form_validation.js"></script>
  </body>
</html>
<script>
  // if (Utils.get_from_localstorage("user")) {
  //   window.location = "../";
  // }
  // if (
  //   Utils.get_from_localstorage("user") &&
  //   window.location.href ==
  //     "http://localhost/Real-Estate-Marketplace/pages/register.html"
  // ) {
  //   console.log("user", Utils.get_from_localstorage("user"));
  //   console.log("window.location.href", window.location.href);
  //   window.location.href = "../index.html";
  //   window.location.reload();
  // }
  // FormValidation.validate("#register-form", {}, function (data) {
  //   RestClient.post(
  //     "auth/register",
  //     data,
  //     function (response) {
  //       // Utils.set_to_localstorage("user", response);
  //       // window.location.href = "../pages/login.html";
  //       console.log("response", response);
  //     },
  //     function (error) {
  //       console.log("error", error);
  //       toastr.error(error.responseText);
  //     }
  //   );
  // });

  FormValidation.validate("#register-form", {}, function (data) {
    $.ajax({
      url: Constants.get_api_base_url() + "auth/register",
      type: "POST",
      data: data,
      success: function (response) {
        console.log("Registration successful!", response);

        // Redirect to login page
        window.location.replace("login.html");
      },
      error: function (xhr, status, error) {
        console.log("Registration error:", xhr, status, error);
        alert(
          "Registration failed: " +
            (xhr.responseText || error || "Unknown error")
        );
      },
    });
  });
  document.addEventListener("DOMContentLoaded", function () {
    if (
      Utils.get_from_localstorage("user") &&
      window.location.href.includes("pages/register.html")
    ) {
      console.log("user", Utils.get_from_localstorage("user"));
      console.log("window.location.href register", window.location.href);
      window.location.reload();
      window.location.href = "../index.html";
    }
  });
  // 	FormValidation.validate("#add-user-form",
  // 	{},
  // 	function(data){
  // 		$('#add-user-modal button[type="cancel"]').trigger("click");

  // 		$.post(Constants.get_api_base_url() + "users/add", data)
  // 		.done(function(data){

  // 			toastr.success("User added successfully!");
  // 		}).fail(function(xhr, textStatus, errorThrown) {

  //           toastr.error("Error: " + errorThrown);
  //       	});
  // 	}
  // );
</script>
